<h1>RÃ©servez votre table</h1>
<section id="filtre_section" class="block_white">
  <h2>Filtrer les tables</h2>
  <form id="filtre_form" [formGroup]="filtreFormTable" (ngSubmit)="appliquerFiltreTable()">
    <div class="filtre_groupe">
      <label for="nbPersonne">Nombre de personnes</label>
      <input type="number" id="nbPersonne" min="1" max="10" formControlName="nbPersonnes" />
    </div>

    <div class="filtre_groupe">
      <label for="date">Date</label>
      <input type="date" id="date" formControlName="date" [min]="today" />
      <!-- mettre minimum date du jour-->
    </div>

    <div class="filtre_groupe">
      <label for="heureArrivee">Heure d'arrivÃ©e</label>
      <input type="time" id="heureArrivee" formControlName="heureArrivee" />
    </div>
    <div class="filtre_groupe">
      <label for="heureDepart">Heure de dÃ©part</label>
      <input type="time" id="heureDepart" formControlName="heureDepart" />
    </div>

    <input type="submit" value="Appliquer les filtres" class="btn" />
  </form>
</section>

<section id="resultat_filtre" class="block_white">
  <h2>ğŸ² Nos tables</h2>
  <div class="carrousel-container">
    <button class="nav-btn prev" (click)="prevTables()">&#10094;</button>

    <div class="carrousel" #carrouselTables>
      <div class="carte-table" *ngFor="let table of tables">
        <img [src]="'assets/images/table/' + table.imgUrl" [alt]="table.nomTable" />
        <div class="carte-info">
          <h3>{{ table.nomTable }}</h3>
          <p>{{ table.capacite }} personnes</p>
          <div class="actions">
            <button class="btn btn-reserver" (click)="choisirTable(table)">RÃ©server</button>
          </div>
        </div>
      </div>
    </div>
    <br />
    <button class="nav-btn next" (click)="nextTables()">&#10095;</button>
  </div>
</section>

<section id="filtre_section" class="block_white" *ngIf="tableChoisi">
  <h2>Filtrer les jeux</h2>
  <form id="filtre_form" [formGroup]="filtreFormJeu" (ngSubmit)="appliquerFiltreJeu()">
    <div class="filtre_groupe">
      <label for="ageMin">Age minimum</label>
      <input type="number" id="ageMin" min="1" max="18" formControlName="ageMin" />
    </div>

    <input type="submit" value="Appliquer les filtres" class="btn" />
  </form>
</section>

<section id="resultat_filtre" class="block_white" *ngIf="tableChoisi">
  <h2>ğŸ² Nos jeux</h2>
  <div class="carrousel-container">
    <button class="nav-btn prev" (click)="prevJeux()">&#10094;</button>

    <div class="carrousel" #carrouselJeux>
      <div class="carte-jeu" *ngFor="let jeu of jeux">
        <img [src]="'assets/images/jeux/' + jeu.imgURL" [alt]="jeu.nom" />
        <div class="carte-info">
          <h3>{{ jeu.nom }}</h3>
          <p>Ã¢ge minimum: {{ jeu.ageMinimum }}</p>
          <p>Nombre de joueurs min : {{ jeu.nbJoueurMinimum }}</p>
          <p>Nombre de joueurs max : {{ jeu.nbJoueurMaximum }}</p>
          <p>durÃ©e : {{ jeu.duree }} minutes - note : {{ jeu.note }}</p>

          <div class="actions">
            <button class="btn btn-louer" (click)="choisirJeu(jeu)">Choisir</button>
          </div>
        </div>
      </div>
    </div>

    <button class="nav-btn next" (click)="nextJeux()">&#10095;</button>
  </div>
</section>

<section id="formulaire reservation" class="block_white" *ngIf="jeuChoisi">
  <h2>Formulaire de rÃ©servation</h2>
  <form [formGroup]="reservationForm" id="reservationForm" (ngSubmit)="validerReservation()">
    <div class="filtre_groupe">
      <label>Jeu :</label>
      <input type="text" [value]="jeuSelectionne?.nom" disabled />
    </div>

    <div class="filtre_groupe">
      <label>Nombre de joueurs :</label>
      <input type="number" formControlName="nbJoueur" readonly />
    </div>
    <div class="filtre_groupe">
      <label>Date et heure de dÃ©but :</label>
      <input type="datetime-local" formControlName="dateDebutAffichage" readonly />
    </div>
    <div class="filtre_groupe">
      <label>Date et heure de fin : </label>
      <input type="datetime-local" formControlName="dateFinAffichage" readonly />
    </div>

    <div class="filtre_groupe">
      <label>Game Master : </label>
      <input type="checkbox" formControlName="avecGameMaster" (change)="updateDispoIfNeeded()" />
    </div>

    <div *ngIf="reservationForm.get('avecGameMaster')?.value" class="filtre_groupe">
      <select formControlName="gameMasterId">
        <option *ngFor="let gm of gameMastersDispo" [value]="gm.id">
          {{ gm.nom }}
        </option>
      </select>
    </div>
    <div class="form-group">
      <button type="submit" class="btn enregistrer">RÃ©server</button>
      <button type="button" (click)="resetFiltreTable()" class="btn annuler">Annuler</button>
    </div>
  </form>
</section>
